#!/usr/bin/env bash

source $(dirname $0)/../lib/bowline/bowline
assert_running
assert_composer

export DRUSH="docker exec -it ${web} sudo -iu www-data TERM="xterm" /var/www/vendor/drush/drush/drush --root=/var/www/docroot --uri=${DRUSH_URI}"

echo "Creating/recreating demo users"

${DRUSH} user-cancel -y demo-user > /dev/null
DRUSH = drush
DEMO_USER=$(${DRUSH} user-create demo-user1 --password=demo --mail=demo-user@example.org --fields=uid --pipe)
${DRUSH} user-add-role employee demo-user1

DEMO_USER=$(${DRUSH} user-create demo-user2 --password=demo --mail=demo-user2@example.org --fields=uid --pipe)
${DRUSH} user-add-role employee demo-user2

${DRUSH} user-cancel -y demo-admin > /dev/null
DEMO_ADMIN=$(${DRUSH} user-create demo-admin --password=demo --mail=demo-admin@example.org --fields=uid --pipe)
${DRUSH} user-add-role administrator ${DEMO_ADMIN}

